<UserControl x:Class="AccountManager.Views.UserControls.SearchBox"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
             xmlns:converters="clr-namespace:AccountManager.Views.Converters"
             x:Name="Root">
    
    <UserControl.Resources>
        <converters:StringToVisibilityConverter x:Key="StringToVisConverter"/>
    </UserControl.Resources>

    <Border Background="{StaticResource SearchBackgroundColor}" 
           CornerRadius="20" 
           Padding="12,8">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            
            <!-- Search Icon -->
            <materialDesign:PackIcon Grid.Column="0" 
                                   Kind="Magnify" 
                                   Width="20" 
                                   Height="20" 
                                   Foreground="{StaticResource TextSecondaryColor}"
                                   VerticalAlignment="Center"
                                   Margin="0,0,8,0"/>
            
            <!-- Search TextBox -->
            <TextBox Grid.Column="1" 
                    x:Name="SearchTextBox"
                    Text="{Binding SearchText, ElementName=Root, UpdateSourceTrigger=PropertyChanged}"
                    Background="Transparent" 
                    BorderThickness="0" 
                    FontSize="14"
                    VerticalAlignment="Center"
                    KeyDown="OnKeyDown"
                    materialDesign:HintAssist.Hint="{Binding PlaceholderText, ElementName=Root}"/>
            
            <!-- Clear Button -->
            <Button Grid.Column="2" 
                   Style="{StaticResource MaterialDesignIconButton}" 
                   Width="24" 
                   Height="24"
                   Click="OnClearClick"
                   ToolTip="Clear Search"
                   Visibility="{Binding SearchText, ElementName=Root, Converter={StaticResource StringToVisConverter}}">
                <materialDesign:PackIcon Kind="Close" 
                                       Width="16" 
                                       Height="16" 
                                       Foreground="{StaticResource TextSecondaryColor}"/>
            </Button>
        </Grid>
    </Border>
</UserControl>